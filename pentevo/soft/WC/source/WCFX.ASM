;---------------------------------------HELP    PUSH IX        LD IX,HPWND:CALL PRWOW        CALL Confa        CALL USPO        CALL NUSP        CALL RRESB        POP IX        RET;-------Confa   CALL FROZEN        LD HL,LOBU+16,B,32:CALL NOPING        LD HL,LOBU,DE,LOBU+16,BC,12:LDIR        CALL ROZEN_LD HL,LOBU+16,DE,#0307,BC,28:CALL PRSRW        LD A,%01110001:CALL PRIAT        LD HL,IVD,DE,LOBU,BC,14:LDIR        LD A,(CNFv)        LD HL,IVDy        OR A:JR NZ,$+5:LD HL,IVDn        LD BC,8:LDIR_LD HL,LOBU,DE,#040B,BC,22:CALL PRSRW        LD A,%01110000:CALL PRIAT        RET;-------ROZEN   LD A,(HL):AND %00011111        PUSH HL        LD L,A,H,0        CALL DECZ:LD A,".",(DE),A:INC DE        POP HL        LD A,(HL):INC HL        SRL (HL):RRA.4      SRL A        PUSH HL:LD L,A,H,0:CALL DECZ        POP HL        EX DE,HL        LD (HL),".":INC HL        LD (HL),"2":INC HL        LD (HL),"0":INC HL        EX DE,HL        LD A,(HL):AND %00111111        PUSH HL:LD L,A,H,0:CALL DECZ        POP HL        BIT 6,(HL):RET NZ        INC DE        LD HL,BETA,BC,4:LDIR        RET;-------FROZEN  LD BC,#DFF7,A,#F0,E,A:OUT A        LD B,#BF:XOR A:OUT A        LD HL,LOBUFRZ     LD B,#BF:INI:INC E:JR Z,FrZ        LD B,#DF:OUT E        JR FRZFrZ     LD B,#BF,A,2:OUT A        RET;---------------------------------------COPY    CALL CURSER        CALL MARKSRH,Z,IMrk:RET Z        CALL CPDITERM    CALL SWPPAN,DRACT        LD DE,BRRR:CALL TLSTCAT        CALL PANELI,FOLD        CALL SWPPAN,DRACT        RET;*******CPDI    PUSH IX        LD IX,F5WND:CALL PRWOW_LD HL,TXT8,DE,#000D,BC,13:CALL PRSRW        LD A,%11110111:CALL PRIAT        LD HL,(MRCT)        LD DE,TXT9+5:CALL DECZ2_LD HL,TXT9,DE,#020B,BC,18:CALL PRSRW        LD A,1:CALL YNCPM     EI:HALT        XOR A:CALL YN        CALL ENKE:JR NZ,CPGO        CALL ESC:JR Z,CPMCPet    CALL RRESB        POP IX        RET;-------CPGO    LD A,#FF:CALL YN:JR NZ,CPet        POP IX        LD HL,0LENIN   PUSH HL        CALL GETen        INC DE:LD A,(DE):OR A:JR Z,CPgo.2      DEC DE        LD A,(DE):OR A:LD A,0,(DE),A        CALL NZ,COPYF:JR NZ,CPgo        POP HL        INC HL        JP LENINCPgo    POP HL        PUSH IX        LD IX,F5WND:CALL RRESB        POP IX        JP WLIT;*******MARKSRH LD HL,0:XOR A:LD (ABT),A        EXX:LD BC,0RKSRH   EXX        LD (MRRN),HL:CALL Gwe:JR Z,ERK        DEC HL,HL:LD A,(HL):OR A        LD HL,(MRRN):INC HL:JR Z,RKSRH+1        EXX        INC BC        JP RKSRHERK     EXX        LD HL,0        LD (MRRN),HL        LD (MRCT),BC        LD A,B:OR C        RET;*******FLOF    PUSH IX        LD IX,F5WND        LD HL,(MRRN):INC HL:LD (MRRN),HL        LD DE,TXT10+4:CALL DECZ2        LD HL,(MRCT)        LD DE,TXT10+8+4:CALL DECZ2_LD HL,TXT10,DE,#020A,BC,20:CALL PRSRW        LD A,32        LD HL,ENTRY,DE,LOBU,BC,8:LDIR        LD (DE),A:INC DE        LD C,3:LDIR_LD HL,LOBU,DE,#010E,BC,12:CALL PRSRW        LD A,%01110000:CALL PRIAT        POP IX        LD A,(ABT):OR A        RET;---------------------------------------CER0    CALL SWPPAN,DRACT        LD HL,TER2        LD DE,#0116        LD BC,17        CALL ERR0CEX     LD A,1:OR A        RET;-------COPYF   CALL FLOF,NZ,ABME:JR NZ,CEX        CALL TMTOEN        LD HL,BRRR:CALL GIPAG        LD A,BUFPG:CALL MNGC        CALL SWPPAN,DRACT        LD HL,ARRR,DE,ENTRY+28,BC,4:LDIR        LD HL,ENTRY:CALL GENTRY        LD HL,(ARRR),DE,(ARRR+2)        CALL MKSG:JR NZ,CER0        CALL SVHDFL:JR NZ,CER0        LD (BRRR),HL,(BRRR+2),DE        LD HL,BRRR:CALL GIPAG        CALL PBSHWSVNG    CALL PBPR        CALL SWPPAN,DRACT        LD HL,#C000        LD B,32:CALL LOAD512        CALL SWPPAN,DRACT        LD HL,#C000        LD B,32:CALL SAVE512        CP #0F:JR NZ,SVNG        CALL PBHTW        CALL SWPPAN,DRACT        XOR A        RET;*******MkDir   CALL CURSER        PUSH IX        LD IX,MDWND:CALL PRWOW_LD HL,TXT6,DE,#0009,BC,15:CALL PRSRW        LD A,%11110101:CALL PRIAT_LD HL,TCT0,DE,#0101,BC,5:CALL PRSRW        LD DE,#0106:CALL GADRW        LD (BMKD+1),HL        LD DE,#0800,A,#FF:CALL ISTRMKD     EI:HALT        CALL ESC:JR NZ,EMKD        CALL ENKE:JR NZ,BMKD        XOR A:CALL ISTR        JR MKD;-------BMKD    LD HL,0,DE,ENTRY,BC,11:LDIR        CALL TMTOEN        LD HL,ENTRY:CALL GENTRY        LD A,BUFPG:CALL MNGC        LD HL,ENTRY:CALL MKDIR        CALL RRESB        POP IXSEXY    LD DE,BRRR:CALL TLSTCAT        CALL PANELI,FOLD        XOR A        RET;-------EMKD    CALL RRESB        POP IX        RET;*******Move    CALL GETEN        INC DE:LD A,(DE):CP ".":RET Z        CALL CURSER        LD HL,ENTRY:CALL GENTRY        LD HL,BRRR:CALL SRHDR:RET Z        CALL RENAME:JP Z,SEXY        PUSH DE        LD HL,ENTRY:CALL ENCEN        POP DE        LD HL,ENTRY,BC,11:LDIR        CALL STAMP        JP SEXY;-------RENAME  PUSH IX        PUSH DE        LD HL,MDWND,DE,WINDC,BC,12:LDIR        LD E,(IX+2)        LD D,(IX+3)        LD A,(IX+12):DEC A        LD IX,WINDC        LD (IX+1),0        LD (IX+2),E        ADD A,D:LD (IX+3),A        CALL PRWOW_LD HL,TXT7,DE,#000C,BC,7:CALL PRSRW        LD A,%11110101:CALL PRIAT        LD DE,#0101:CALL GADRW,MMM        LD A,#FF:CALL ISTRREN     EI:HALT        CALL ESC:JR NZ,REM        CALL ENKE:JR NZ,TRIGUN        XOR A:CALL ISTR        JR RENTRIGUN  LD A,1:CALL ISTR        LD DE,ENTRY,BC,8:LDIR        INC HL:LD C,3:LDIR        CALL RRESB        POP DE        POP IX        LD A,1:OR A        RETREM     LD A,1:CALL ISTR        CALL RRESB        POP DE        POP IX        XOR A        RET;-------MMM     PUSH HL        EX DE,HL:LD HL,ENTRY,BC,8:LDIR        INC DE:LD A,(HL),C,3:LDIR        LD L,#08:CP 32:JR Z,MmM.4      DEC DE        LD A,".",(DE),A        LD L,#0CMmM     LD D,L,E,0        POP HL        RET;*******DelFl   CALL CURSER        CALL MARKSRH,Z,IMrk:RET Z        CALL DLDI:RET Z        LD DE,BRRR:CALL TLSTCAT        CALL PANELI,FOLD        RETDLDI    PUSH IX        LD IX,F5WND:CALL PRWOW_LD HL,TXTB,DE,#000C,BC,15:CALL PRSRW        LD A,%11110111:CALL PRIAT        LD HL,(MRCT)        LD DE,TXTD+7:CALL DECZ2_LD HL,TXTD,DE,#020A,BC,20:CALL PRSRW        LD A,1:CALL YNDLM     EI:HALT        XOR A:CALL YN        CALL ENKE:JR NZ,DLGO        CALL ESC:JR Z,DLMDLet    CALL RRESB        POP IX        XOR A        RET;-------DLGO    LD A,#FF:CALL YN:JR NZ,DLet_LD HL,TXTE,DE,#0408,BC,24:CALL PRSRW        LD A,%01110010:CALL PRIAT        POP IX        LD HL,0LENIN2  PUSH HL        CALL GETen        INC DE:LD A,(DE):OR A:JR Z,DLgo.2      DEC DE        LD A,(DE):OR A:LD A,0,(DE),A        CALL NZ,DELF:JR NZ,DLgo        POP HL        INC HL        JP LENIN2DLgo    POP HL        PUSH IX        LD IX,F5WND:CALL RRESB        POP IX        LD A,1:OR A        RET;-------DER0    LD A,1:OR A        RETDELF    CALL FLOF,NZ,ABME:JR NZ,DER0        LD HL,ENTRY:CALL GENTRY        LD HL,BRRR:CALL SRHDR:JR Z,DER0        LD A,#E5,(DE),A        CALL STAMP        LD HL,BRRR:CALL DLSG        XOR A        RET;*******ABME    PUSH IX        LD IX,ABWND:CALL PRWOW_LD HL,TXTF,DE,#0010,BC,9:CALL PRSRW        LD A,%11110000:CALL PRIAT_LD HL,TXTG,DE,#020C,BC,16:CALL PRSRWMMEN    LD A,1:CALL YNABM     EI:HALT:XOR A:CALL YN        CALL ENKE:JR Z,ABM        CALL RRESB        LD A,#FF:CALL YN        LD A,#01:JR Z,$+3:XOR A        POP IX        LD (ABT),A:OR A        RET;*******DLME    PUSH IX        PUSH HL,DE,BC        LD IX,ABWND:CALL PRWOW        POP BC,DE,HL        CALL PRSRW_LD HL,TXTL,DE,#0010,BC,9:CALL PRSRW        LD A,%11110000:CALL PRIAT        JR MMEN;---------------------------------------PBSHW   PUSH IX        LD A,(PGC)        PUSH AF        LD IX,PBWND:CALL PRWOW        LD HL,(ENTRY+28)        LD DE,(ENTRY+30)        CALL DEL64        LD (PBSTL+1),HL        LD (PBSTH+1),DE        LD HL,0,(PBNOW),HL,(PBNOW+2),HL        POP AF        CALL MNGC        POP IX        RETPBHTW   PUSH IX        LD IX,PBWND:CALL RRESB        POP IX        RET;-------PBPR    PUSH IX        LD A,(PGC)        PUSH AF        XOR A:CALL MNGC        LD HL,(PBNOW)        LD DE,(PBNOW+2)        LD BC,16384        ADD HL,BC:JR NC,$+3:INC DE        LD (PBNOW),HL        LD (PBNOW+2),DE        CALL DLT4PCH        LD HL,TXTBU        LD A,C,C,64        OR A:JR NZ,$+5:LD A,C:JR DoL        CP C:JR C,$+3:LD A,C        LD B,A        LD A,C:SUB B        LD C,#DB        LD (HL),C:INC HL:DJNZ $-2        OR A:JR Z,DOLDoL     LD B,A,C,#B1        LD (HL),C:INC HL:DJNZ $-2DOL_LD IX,PBWND_LD HL,TXTBU,DE,#0101,BC,64:CALL PRSRW        POP AF        CALL MNGC        POP IX        RET;-------ERR0    ;i:HL - TEXT Message;          DE - Coords;          BC - Lenght        PUSH IX        PUSH HL,DE,BC        LD IX,ERWND:CALL PRWOW        LD HL,TXT5,DE,#001C        LD BC,6:CALL PRSRW        LD A,%11110010:CALL PRIAT        POP BC,DE,HL        CALL PRSRW        CALL USPO        CALL NUSP        CALL RRESB        POP IX        RET;---------------------------------------